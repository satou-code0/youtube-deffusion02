# 今後のTODOリスト

## 1. 認証・会員管理（Supabase）
- [x] Supabaseプロジェクト作成・接続  <!-- 完了: Supabaseプロジェクト「youtube-diffusion」作成・接続 -->
- [x] ユーザー登録・ログインUIの実装（メール認証）  <!-- 完了: AuthForm.tsxでメール認証UI実装 -->
- [x] 無料会員の利用回数（3回）制御ロジック実装  <!-- 完了: usersテーブルのused_countとis_paidで制御 -->
- [ ] 有料プラン購入後の権限付与（is_paidフラグ更新）
- [ ] Supabase Edge Functionの導入・API設計

## 2. Stripeによる有料プラン決済
- [ ] Stripeアカウント・API連携
- [ ] 有料プランの設計（例：月額/年額）
- [ ] 決済UIの実装
- [ ] 決済完了後のSupabase連携（usersテーブル更新）

## 3. 会員権限・利用回数による機能制御
- [x] 無料会員は記事生成機能を3回まで利用可能に制御  <!-- 完了: 3回超過時に有料案内UI表示 -->
- [x] 3回を超えた場合の有料プラン案内表示  <!-- 完了: showUpgradeで案内UI表示 -->
- [x] 有料会員は無制限で利用可能  <!-- 完了: is_paid=trueなら制限なし -->
- [x] 記事生成時に利用回数をインクリメント  <!-- 完了: incrementUsedCount()でDB更新 -->

## 4. データベース設計・管理
- [x] usersテーブル（is_paidフラグ追加）  <!-- 完了: usersテーブル作成・is_paidカラム追加 -->
- [ ] 必要に応じてマイグレーション・スキーマ管理

## 5. APIキー管理
- [x] APIキーをSupabase DBに安全に保存（暗号化等）  <!-- 完了: usersテーブルのカラムに保存・取得・削除対応 -->
- [x] フロントエンドから安全に取得・利用  <!-- 完了: SettingsPanelでDB連携 -->
- [x] APIキーの登録・変更・削除UI  <!-- 完了: SettingsPanelでUI実装 -->

## 6. 記事・履歴管理
- [~~] 生成記事をSupabaseに保存 <!-- 不要: コピー機能のみで十分なため -->
- [~~] ユーザーごとに履歴を閲覧可能に <!-- 不要: コピー機能のみで十分なため -->
- [~~] 記事の削除・編集機能 <!-- 不要: コピー機能のみで十分なため -->

## 7. その他
- [x] .env管理・README整備  <!-- 完了: README.md作成・環境変数設定 -->
- [ ] テスト導入（ユニット/結合）
- [x] UI/UX改善  <!-- 完了: 利用回数表示・サインアップ成功案内追加 -->
- [ ] 利用規約・プライバシーポリシー整備

---

## 進捗管理
- [x] 各タスクの進捗を随時更新  <!-- 完了: チェック方式で進捗管理開始 -->
- [ ] 実装・検証・レビューのサイクルを明確化

## 変更内容解説：
- 利用フローを「無料3回→有料無制限」に変更し、Supabase Edge Function利用を前提にタスクを整理
- users, usage_logs, subscriptionsのシンプルなDB設計・管理タスクを追加
- 無料会員の利用回数制御、有料会員権限付与のタスクを明確化
- 全体的にシンプルな構成を意識して再編 